---
title: "knitr及knitrextra"
author: "Jianqi Huang"
date: "2022-11-12"
output: html_document
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<p><code>kable</code>是一个能够将输入的类数据框格式的数据快速在输出为表格的形式</p>
<pre class="r"><code>kable(x, format, digits = getOption(&quot;digits&quot;),
    row.names = NA, col.names = NA, align, caption = NULL,
    label = NULL, format.args = list(), escape = TRUE,
    ...)</code></pre>
<p>需要设定字体的尺寸，可使用<code>kableExtra</code>包中的<code>kable_styling()</code> 函数。</p>
<pre class="r"><code>grade1&lt;-c(90,88,77,95)
grade2&lt;-c(8,9.0,10.0,8.5)
name&lt;-c(&quot;小甲&quot;,&quot;小柄&quot;,&quot;小顶&quot;,&quot;晓敏&quot;)
df&lt;-data.frame(name,grade1,grade2)
knitr::kable(df)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">grade1</th>
<th align="right">grade2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">小甲</td>
<td align="right">90</td>
<td align="right">8.0</td>
</tr>
<tr class="even">
<td align="left">小柄</td>
<td align="right">88</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="left">小顶</td>
<td align="right">77</td>
<td align="right">10.0</td>
</tr>
<tr class="even">
<td align="left">晓敏</td>
<td align="right">95</td>
<td align="right">8.5</td>
</tr>
</tbody>
</table>
<p>利用kable可输出一些其他样式：但实际上在代码块中编译的时候，并不会输出为pipe格式，而是在console中才会输出为这个格式。</p>
<pre class="r"><code>knitr::kable(df,&quot;pipe&quot;)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">grade1</th>
<th align="right">grade2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">小甲</td>
<td align="right">90</td>
<td align="right">8.0</td>
</tr>
<tr class="even">
<td align="left">小柄</td>
<td align="right">88</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="left">小顶</td>
<td align="right">77</td>
<td align="right">10.0</td>
</tr>
<tr class="even">
<td align="left">晓敏</td>
<td align="right">95</td>
<td align="right">8.5</td>
</tr>
</tbody>
</table>
<pre class="r"><code>knitr::kable(df, &#39;simple&#39;)</code></pre>
<pre><code>name    grade1   grade2
-----  -------  -------
小甲        90      8.0
小柄        88      9.0
小顶        77     10.0
晓敏        95      8.5</code></pre>
<pre><code>knitr::kable(df, &#39;html&#39;)</code></pre>
<pre class="html"><code>&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&quot;text-align:left;&quot;&gt; name &lt;/th&gt;
   &lt;th style=&quot;text-align:right;&quot;&gt; grade1 &lt;/th&gt;
   &lt;th style=&quot;text-align:right;&quot;&gt; grade2 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&quot;text-align:left;&quot;&gt; 小甲 &lt;/td&gt;
   &lt;td style=&quot;text-align:right;&quot;&gt; 90 &lt;/td&gt;
   &lt;td style=&quot;text-align:right;&quot;&gt; 8.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&quot;text-align:left;&quot;&gt; 小柄 &lt;/td&gt;
   &lt;td style=&quot;text-align:right;&quot;&gt; 88 &lt;/td&gt;
   &lt;td style=&quot;text-align:right;&quot;&gt; 9.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&quot;text-align:left;&quot;&gt; 小顶 &lt;/td&gt;
   &lt;td style=&quot;text-align:right;&quot;&gt; 77 &lt;/td&gt;
   &lt;td style=&quot;text-align:right;&quot;&gt; 10.0 &lt;/td&gt;
  &lt;/tr&gt;
   &lt;tr&gt;
   &lt;td style=&quot;text-align:left;&quot;&gt; 晓敏 &lt;/td&gt;
   &lt;td style=&quot;text-align:right;&quot;&gt; 95 &lt;/td&gt;
   &lt;td style=&quot;text-align:right;&quot;&gt; 8.5 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</code></pre>
<pre class="r"><code>knitr::kable(df, &#39;latex&#39;)</code></pre>
<pre class="latex"><code>\begin{tabular}{l|r|r}
\hline
name &amp; grade1 &amp; grade2\\
\hline
小甲 &amp; 90 &amp; 8.0\\
\hline
小柄 &amp; 88 &amp; 9.0\\
\hline
小顶 &amp; 77 &amp; 10.0\\
\hline
晓敏 &amp; 95 &amp; 8.5\\
\hline
\end{tabular}</code></pre>
<div id="调整表格" class="section level3">
<h3>调整表格</h3>
<pre class="r"><code>knitr::kable(df,
  col.names = c(&quot;姓名&quot;,&quot;语文&quot;,&quot;数学&quot;)
)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">姓名</th>
<th align="right">语文</th>
<th align="right">数学</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">小甲</td>
<td align="right">90</td>
<td align="right">8.0</td>
</tr>
<tr class="even">
<td align="left">小柄</td>
<td align="right">88</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="left">小顶</td>
<td align="right">77</td>
<td align="right">10.0</td>
</tr>
<tr class="even">
<td align="left">晓敏</td>
<td align="right">95</td>
<td align="right">8.5</td>
</tr>
</tbody>
</table>
<pre class="r"><code>knitr::kable(df,
             col.names = paste0(&#39;The NO.1 group &#39;,colnames(df))
)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">The NO.1 group name</th>
<th align="right">The NO.1 group grade1</th>
<th align="right">The NO.1 group grade2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">小甲</td>
<td align="right">90</td>
<td align="right">8.0</td>
</tr>
<tr class="even">
<td align="left">小柄</td>
<td align="right">88</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="left">小顶</td>
<td align="right">77</td>
<td align="right">10.0</td>
</tr>
<tr class="even">
<td align="left">晓敏</td>
<td align="right">95</td>
<td align="right">8.5</td>
</tr>
</tbody>
</table>
<p><code>paste0</code>是将字符进行连接。<code>paste</code>是用于连接字符，默认以空字符来连接即<code>sep=' '</code>，而<code>paste0</code>不能用sep进行连接。</p>
<p><code>col.name</code>将列名替换为一个新的名称。</p>
</div>
<div id="对齐方法" class="section level3">
<h3>对齐方法</h3>
<pre class="r"><code>knitr::kable(df,align = &quot;clr&quot;)</code></pre>
<table>
<thead>
<tr class="header">
<th align="center">name</th>
<th align="left">grade1</th>
<th align="right">grade2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">小甲</td>
<td align="left">90</td>
<td align="right">8.0</td>
</tr>
<tr class="even">
<td align="center">小柄</td>
<td align="left">88</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="center">小顶</td>
<td align="left">77</td>
<td align="right">10.0</td>
</tr>
<tr class="even">
<td align="center">晓敏</td>
<td align="left">95</td>
<td align="right">8.5</td>
</tr>
</tbody>
</table>
</div>
<div id="添加标题" class="section level3">
<h3>添加标题</h3>
<pre class="r"><code>knitr::kable(df,caption = &quot;examinment grades&quot;)</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-4">Table 1: </span>examinment grades</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">grade1</th>
<th align="right">grade2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">小甲</td>
<td align="right">90</td>
<td align="right">8.0</td>
</tr>
<tr class="even">
<td align="left">小柄</td>
<td align="right">88</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="left">小顶</td>
<td align="right">77</td>
<td align="right">10.0</td>
</tr>
<tr class="even">
<td align="left">晓敏</td>
<td align="right">95</td>
<td align="right">8.5</td>
</tr>
</tbody>
</table>
</div>
<div id="调整数字尾数" class="section level3">
<h3>调整数字尾数</h3>
<pre class="r"><code>knitr::kable(df,digits = 4)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">grade1</th>
<th align="right">grade2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">小甲</td>
<td align="right">90</td>
<td align="right">8.0</td>
</tr>
<tr class="even">
<td align="left">小柄</td>
<td align="right">88</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="left">小顶</td>
<td align="right">77</td>
<td align="right">10.0</td>
</tr>
<tr class="even">
<td align="left">晓敏</td>
<td align="right">95</td>
<td align="right">8.5</td>
</tr>
</tbody>
</table>
</div>
<div id="kableextra美化" class="section level2">
<h2>kableExtra美化</h2>
<p>我们尽管可以使用<code>kable</code>对表格进行一些调整，但更多细节上仍然是缺失的。因此引入关于<code>kableExtra</code>包来填补这方面的空缺。</p>
<pre class="r"><code>library(knitr)
library(kableExtra)</code></pre>
<pre><code>## 
## Attaching package: &#39;kableExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     group_rows</code></pre>
<pre class="r"><code>kable(df,caption=&#39;the grades&#39;)%&gt;%
  kable_styling(latex_options = &quot;striped&quot;)</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-6">Table 2: </span>the grades
</caption>
<thead>
<tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
grade1
</th>
<th style="text-align:right;">
grade2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
小甲
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
8.0
</td>
</tr>
<tr>
<td style="text-align:left;">
小柄
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
9.0
</td>
</tr>
<tr>
<td style="text-align:left;">
小顶
</td>
<td style="text-align:right;">
77
</td>
<td style="text-align:right;">
10.0
</td>
</tr>
<tr>
<td style="text-align:left;">
晓敏
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
8.5
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>kable(df, booktabs = TRUE,
      caption = &quot;字体较小的表格&quot;) %&gt;%
  kable_styling(font_size = 8)</code></pre>
<table class="table" style="font-size: 8px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:unnamed-chunk-7">Table 3: </span>字体较小的表格
</caption>
<thead>
<tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:right;">
grade1
</th>
<th style="text-align:right;">
grade2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
小甲
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
8.0
</td>
</tr>
<tr>
<td style="text-align:left;">
小柄
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
9.0
</td>
</tr>
<tr>
<td style="text-align:left;">
小顶
</td>
<td style="text-align:right;">
77
</td>
<td style="text-align:right;">
10.0
</td>
</tr>
<tr>
<td style="text-align:left;">
晓敏
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
8.5
</td>
</tr>
</tbody>
</table>
<div id="对行或列分组" class="section level3">
<h3>对行或列分组</h3>
<p>在原有的数据属性下生成一个分类，在表格形式上是在原有的二维表格下在新生成一行，能够将原有属性进行划到该类别下。</p>
<pre class="r"><code>grade3 &lt;- data.frame(姓名 = c(&quot;张三&quot;,&quot;李四&quot;,&quot;王五&quot;),
                     物理 = c(90,90,85),
                     化学 = c(86,92,80),
                     生物 = c(94,85,90),
                     政治 = c(93,97,95),
                     历史 = c(92,84,80),
                     地理 = c(99,89,95),
                     计算机 = c(92,95,97),
                     体育 = c(85,99,95))
kable(grade3, booktabs = TRUE,
      caption = &quot;对标题列进行分组&quot;) %&gt;%
  add_header_above(c(&quot; &quot; = 1, &quot;理科&quot; = 3,
                     &quot;文科&quot; = 3, &quot;其它&quot; = 2))</code></pre>
<table>
<caption>
<span id="tab:unnamed-chunk-8">Table 4: </span>对标题列进行分组
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
理科
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
文科
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
其它
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
姓名
</th>
<th style="text-align:right;">
物理
</th>
<th style="text-align:right;">
化学
</th>
<th style="text-align:right;">
生物
</th>
<th style="text-align:right;">
政治
</th>
<th style="text-align:right;">
历史
</th>
<th style="text-align:right;">
地理
</th>
<th style="text-align:right;">
计算机
</th>
<th style="text-align:right;">
体育
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
张三
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
94
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
85
</td>
</tr>
<tr>
<td style="text-align:left;">
李四
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
85
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:right;">
89
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
99
</td>
</tr>
<tr>
<td style="text-align:left;">
王五
</td>
<td style="text-align:right;">
85
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
95
</td>
</tr>
</tbody>
</table>
<p>这使用的是<code>add_header_above</code>的方式来实现。</p>
<pre class="r"><code>kable(grade3, booktabs = TRUE,
      caption = &quot;对行进行折叠&quot;) %&gt;%
  pack_rows(
  index = c(&quot;一班&quot; = 1, &quot;二班&quot; = 2)
)</code></pre>
<table>
<caption>
<span id="tab:unnamed-chunk-9">Table 5: </span>对行进行折叠
</caption>
<thead>
<tr>
<th style="text-align:left;">
姓名
</th>
<th style="text-align:right;">
物理
</th>
<th style="text-align:right;">
化学
</th>
<th style="text-align:right;">
生物
</th>
<th style="text-align:right;">
政治
</th>
<th style="text-align:right;">
历史
</th>
<th style="text-align:right;">
地理
</th>
<th style="text-align:right;">
计算机
</th>
<th style="text-align:right;">
体育
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="9" style="border-bottom: 1px solid;">
<strong>一班</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
张三
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
94
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
85
</td>
</tr>
<tr grouplength="2">
<td colspan="9" style="border-bottom: 1px solid;">
<strong>二班</strong>
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
李四
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
85
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:right;">
89
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
99
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2em;" indentlevel="1">
王五
</td>
<td style="text-align:right;">
85
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
95
</td>
</tr>
</tbody>
</table>
</div>
</div>
